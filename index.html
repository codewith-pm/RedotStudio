<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RedotStudio - Professional Invoice Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .pricing-toggle-bg {
            transition: all 0.3s ease;
        }
        .pricing-toggle-switch {
            transition: all 0.3s ease;
            transform: translateX(0%);
        }
        input:checked ~ .pricing-toggle-bg .pricing-toggle-switch {
            transform: translateX(100%);
        }
        .prose h3 {
            margin-top: 1.5em;
            margin-bottom: 0.5em;
            font-size: 1.25rem;
            font-weight: 600;
        }
        /* Modal styles */
        .modal {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
        /* Style for active donation button */
        .donation-preset.active {
            @apply bg-red-600 text-white border-red-600 shadow-md;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header -->
    <header id="home" class="bg-white shadow-sm sticky top-0 z-40">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-red-600">RedotStudio</a>
            <div class="hidden md:flex items-center space-x-8">
                <a href="#features" class="text-gray-600 hover:text-red-600 transition">Features</a>
                <a href="#pricing" class="text-gray-600 hover:text-red-600 transition">Pricing</a>
                <a href="#about" class="text-gray-600 hover:text-red-600 transition">About</a>
                <!-- Updated Contact Link for Desktop -->
                <button id="open-contact-modal-desktop" class="text-gray-600 hover:text-red-600 transition">Contact</button>
            </div>
            <div class="hidden md:flex items-center space-x-4">
                <button id="login-btn-desktop" class="text-gray-600 hover:text-red-600">Log In</button>
                <button id="signup-btn-desktop" class="bg-red-600 text-white px-5 py-2 rounded-lg hover:bg-red-700 transition">Sign Up Free</button>
            </div>
            <button id="mobile-menu-button" class="md:hidden">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
            <a href="#features" class="block py-2 text-gray-600 hover:text-red-600">Features</a>
            <a href="#pricing" class="block py-2 text-gray-600 hover:text-red-600">Pricing</a>
            <a href="#about" class="block py-2 text-gray-600 hover:text-red-600">About</a>
            <button id="open-contact-modal-mobile" class="block py-2 w-full text-left text-gray-600 hover:text-red-600">Contact</button>
            <div class="border-t border-gray-200 mt-4 pt-4">
                <button id="login-btn-mobile" class="block py-2 w-full text-left text-gray-600 hover:text-red-600">Log In</button>
                <button id="signup-btn-mobile" class="block mt-2 w-full text-center bg-red-600 text-white px-5 py-2 rounded-lg hover:bg-red-700">Sign Up Free</button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <section class="bg-white py-20 md:py-32">
            <div class="container mx-auto px-6 text-center">
                <h1 class="text-4xl md:text-6xl font-bold text-gray-900 leading-tight">Effortless Invoicing, Faster Payments</h1>
                <p class="mt-6 text-lg text-gray-600 max-w-2xl mx-auto">RedotStudio empowers modern businesses to create stunning invoices, automate reminders, and accept online payments seamlessly. Focus on your work, not your paperwork.</p>
                <div class="mt-8 flex justify-center gap-4">
                    <button id="signup-btn-hero" class="bg-red-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-red-700 transition">Get Started for Free</button>
                    <a href="#features" class="bg-gray-200 text-gray-800 px-8 py-4 rounded-lg text-lg font-semibold hover:bg-gray-300 transition">Explore Features</a>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-900">A Smarter Way to Manage Your Billing</h2>
                    <p class="mt-4 text-gray-600 max-w-xl mx-auto">Our feature-rich platform is designed to simplify your entire invoicing workflow.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12">
                     <!-- Feature 1 -->
                    <div class="text-center">
                        <div class="bg-red-100 text-red-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i data-lucide="file-text" class="w-8 h-8"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Intuitive Invoice Builder</h3>
                        <p class="text-gray-600">Generate and dispatch polished, professional invoices in moments with our user-friendly builder.</p>
                    </div>
                    <!-- Feature 2 -->
                    <div class="text-center">
                        <div class="bg-red-100 text-red-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i data-lucide="palette" class="w-8 h-8"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Brand Customization</h3>
                        <p class="text-gray-600">Incorporate your logo and brand colors to deliver a consistent, trustworthy client experience.</p>
                    </div>
                    <!-- Feature 3 -->
                    <div class="text-center">
                        <div class="bg-red-100 text-red-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i data-lucide="credit-card" class="w-8 h-8"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Secure Online Payments</h3>
                        <p class="text-gray-600">Enable clients to pay you directly via credit/debit card through secure, integrated gateways.</p>
                    </div>
                    <!-- Feature 4 -->
                    <div class="text-center">
                        <div class="bg-red-100 text-red-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i data-lucide="clock" class="w-8 h-8"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Automated Reminders</h3>
                        <p class="text-gray-600">Set up automatic, polite payment reminders for overdue invoices and save time on follow-ups.</p>
                    </div>
                    <!-- Feature 5 -->
                    <div class="text-center">
                        <div class="bg-red-100 text-red-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i data-lucide="trending-up" class="w-8 h-8"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Expense Management</h3>
                        <p class="text-gray-600">Effortlessly log and categorize business expenses to maintain a clear overview of your finances.</p>
                    </div>
                    <!-- Feature 6 -->
                    <div class="text-center">
                        <div class="bg-red-100 text-red-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i data-lucide="bar-chart-2" class="w-8 h-8"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Insightful Reporting</h3>
                        <p class="text-gray-600">Access powerful reports on income, expenses, and payment statuses with just one click.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Pricing Section -->
        <section id="pricing" class="bg-gray-50 py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-900">Fair Pricing for Businesses of All Sizes</h2>
                    <p class="mt-4 text-gray-600">Choose a plan that scales with you. No hidden fees, ever.</p>
                    <div class="mt-8 flex justify-center items-center space-x-4">
                        <span class="text-gray-600 font-medium">Monthly</span>
                        <label for="pricing-toggle" class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" id="pricing-toggle" class="sr-only peer">
                            <div class="w-14 h-8 bg-gray-200 rounded-full pricing-toggle-bg peer-checked:bg-red-600">
                                <div class="absolute top-1 left-1 bg-white border-gray-300 border w-6 h-6 rounded-full pricing-toggle-switch"></div>
                            </div>
                        </label>
                        <span class="text-gray-600 font-medium">Yearly <span class="text-green-600 font-semibold">(Save 20%)</span></span>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-5xl mx-auto">
                    <!-- Basic Plan -->
                    <div class="border border-gray-200 rounded-lg p-8 flex flex-col bg-white">
                        <h3 class="text-2xl font-semibold text-gray-900">Basic</h3>
                        <p class="mt-2 text-gray-600">Ideal for freelancers and professionals starting out.</p>
                        <div class="mt-6">
                            <span class="text-4xl font-bold" data-monthly="$49" data-yearly="$39">$49</span>
                            <span class="text-gray-600" data-monthly="/month" data-yearly="/month, billed annually">/month</span>
                        </div>
                        <ul class="mt-8 space-y-4 text-gray-600 flex-grow">
                            <!-- ALIGNMENT FIX -->
                            <li class="flex items-start"><i data-lucide="check" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0"></i>Manage up to 50 active clients.</li>
                            <li class="flex items-start"><i data-lucide="check" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0"></i>Unlimited Invoices and Estimates.</li>
                            <li class="flex items-start"><i data-lucide="check" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0"></i>Access to 5 professional invoice templates.</li>
                            <li class="flex items-start"><i data-lucide="check" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0"></i>Securely accept online payments (Stripe/PayPal).</li>
                            <li class="flex items-start"><i data-lucide="check" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0"></i>Standard financial reports (Income/Expense).</li>
                        </ul>
                        <button class="mt-8 block w-full text-center bg-gray-200 text-gray-800 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300" onclick="openModal(document.getElementById('payment-modal'))">Choose Basic</button>
                    </div>
                    <!-- Professional Plan -->
                    <div class="border-2 border-red-600 rounded-lg p-8 flex flex-col relative bg-white shadow-lg">
                        <span class="bg-red-600 text-white text-xs font-bold uppercase px-3 py-1 rounded-full absolute -top-4 right-8">Most Popular</span>
                        <h3 class="text-2xl font-semibold text-red-600">Professional</h3>
                        <p class="mt-2 text-gray-600">The perfect solution for growing businesses and small teams.</p>
                        <div class="mt-6">
                            <span class="text-4xl font-bold" data-monthly="$99" data-yearly="$79">$99</span>
                            <span class="text-gray-600" data-monthly="/month" data-yearly="/month, billed annually">/month</span>
                        </div>
                        <ul class="mt-8 space-y-4 text-gray-600 flex-grow">
                            <!-- ALIGNMENT FIX -->
                            <li class="flex items-start"><i data-lucide="check" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0"></i><b>Unlimited</b> active clients.</li>
                            <li class="flex items-start"><i data-lucide="check" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0"></i>Unlimited Invoices and Estimates.</li>
                            <li class="flex items-start"><i data-lucide="check" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0"></i>Access to <b>all (15+)</b> professional invoice templates.</li>
                            <li class="flex items-start"><i data-lucide="check" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0"></i>Automated recurring invoices and payment reminders.</li>
                            <li class="flex items-start"><i data-lucide="check" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0"></i>Dedicated <b>Client Portal</b> for viewing/paying invoices.</li>
                            <li class="flex items-start"><i data-lucide="check" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0"></i>Integrated Expense Tracking and management.</li>
                            <li class="flex items-start"><i data-lucide="check" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0"></i>Standard and detailed financial reporting.</li>
                        </ul>
                        <!-- Updated to open payment modal -->
                        <button id="choose-professional-btn" class="mt-8 block w-full text-center bg-red-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-red-700" onclick="openModal(document.getElementById('payment-modal'))">Choose Professional</button>
                    </div>
                    <!-- Enterprise Plan -->
                    <div class="border border-gray-200 rounded-lg p-8 flex flex-col bg-white">
                        <h3 class="text-2xl font-semibold text-gray-900">Enterprise</h3>
                        <p class="mt-2 text-gray-600">Tailored for established businesses and agencies needing scale.</p>
                        <div class="mt-6">
                            <span class="text-4xl font-bold" data-monthly="$149" data-yearly="$119">$149</span>
                            <span class="text-gray-600" data-monthly="/month" data-yearly="/month, billed annually">/month</span>
                        </div>
                        <ul class="mt-8 space-y-4 text-gray-600 flex-grow">
                            <!-- ALIGNMENT FIX -->
                            <li class="flex items-start"><i data-lucide="check" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0"></i>Unlimited active clients and documents.</li>
                            <li class="flex items-start"><i data-lucide="check" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0"></i><b>Multi-user access</b> with custom roles and permissions.</li>
                            <li class="flex items-start"><i data-lucide="check" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0"></i><b>Advanced Reporting,</b> analytics, and custom dashboards.</li>
                            <li class="flex items-start"><i data-lucide="check" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0"></i>Automated recurring billing and payment reminders.</li>
                            <li class="flex items-start"><i data-lucide="check" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0"></i>Full <b>Custom Branding</b> (remove all RedotStudio logos).</li>
                            <li class="flex items-start"><i data-lucide="check" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0"></i>Dedicated <b>Priority Support</b> channel (24/7).</li>
                            <li class="flex items-start"><i data-lucide="check" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0"></i>Full API access for custom integrations.</li>
                        </ul>
                        <button class="mt-8 block w-full text-center bg-gray-200 text-gray-800 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300" onclick="openModal(document.getElementById('contact-modal'))">Contact Sales</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Us Section -->
        <section id="about" class="py-20 bg-white">
            <div class="container mx-auto px-6 max-w-4xl">
                <h2 class="text-3xl font-bold text-center text-gray-900 mb-8">Our Mission</h2>
                <div class="prose prose-lg text-gray-600 max-w-none">
                    <p>RedotStudio was founded with a clear objective: to eliminate the friction in invoicing for freelancers, consultants, and small business owners. We believe that financial admin should be simple, empowering you to dedicate your time to what you do best—your work.</p>
                    <p>Our journey began from personal frustration. As freelance developers and designers, we found existing invoicing tools to be either too complex, too basic, or too expensive. We envisioned a platform that was intuitive by design, visually appealing, and perfectly tailored to the essential needs of modern professionals.</p>
                    <p>Today, RedotStudio proudly supports thousands of businesses worldwide, helping them enhance their professional image, streamline billing operations, and achieve financial clarity. Our commitment is to our community—driving continuous innovation and providing unparalleled support.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer id="contact" class="bg-gray-900 text-white">
        <div class="container mx-auto px-6 py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold">RedotStudio</h3>
                    <p class="mt-4 text-gray-400">Effortless invoicing for modern businesses.<br>support@redotstudio.site</p>
                </div>
                <div>
                    <h4 class="font-semibold">Product</h4>
                    <ul class="mt-4 space-y-2 text-gray-400">
                        <li><a href="#features" class="hover:text-white transition">Features</a></li>
                        <li><a href="#pricing" class="hover:text-white transition">Pricing</a></li>
                        <li><button id="footer-signup-link" class="text-left hover:text-white transition">Sign Up</button></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold">Company</h4>
                    <ul class="mt-4 space-y-2 text-gray-400">
                        <li><a href="#about" class="hover:text-white transition">About Us</a></li>
                        <!-- Updated Contact Link in Footer -->
                        <li><button id="open-contact-modal-footer" class="text-left hover:text-white transition">Contact Us</button></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold">Legal</h4>
                    <ul class="mt-4 space-y-2 text-gray-400">
                        <li><button data-modal="terms" class="legal-link text-left hover:text-white transition">Terms of Service</button></li>
                        <li><button data-modal="privacy" class="legal-link text-left hover:text-white transition">Privacy Policy</button></li>
                        <li><button data-modal="refund" class="legal-link text-left hover:text-white transition">Refund Policy</button></li>
                    </ul>
                </div>
            </div>
            <div class="mt-12 border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center">
                <p class="text-gray-500">&copy; 2025 RedotStudio. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <!-- Floating Donate Button -->
    <button id="donate-fab" class="fixed bottom-6 right-6 bg-red-600 text-white p-4 rounded-full shadow-xl hover:bg-red-700 transition transform hover:scale-105 z-30 flex items-center space-x-2 md:p-4">
        <i data-lucide="heart" class="w-6 h-6"></i>
        <span class="hidden md:inline font-semibold">Donate</span>
    </button>

    <!-- Modals Container -->
    
    <!-- Legal Modal (Content omitted for brevity but present in original) -->
    <div id="legal-modal" class="modal fixed inset-0 z-50 bg-black bg-opacity-60 flex items-center justify-center p-4 hidden opacity-0">
        <div class="modal-content bg-white rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col transform scale-95">
            <div class="flex justify-between items-center p-6 border-b">
                <h2 id="modal-title" class="text-2xl font-bold text-gray-900">Legal Information</h2>
                <button class="modal-close-btn text-gray-500 hover:text-gray-800 transition">
                    <i data-lucide="x" class="w-8 h-8"></i>
                </button>
            </div>
            <div class="p-8 overflow-y-auto">
                <div id="terms-content" class="legal-content hidden prose prose-lg max-w-none text-gray-600">
                     <!-- Terms content from previous step -->
                    <h2 class="text-2xl font-bold text-gray-900">Terms and Conditions</h2>
                    <p class="text-sm text-gray-500">Last updated: October 21, 2025</p>
                    <h3>1. Introduction</h3>
                    <p>Welcome to RedotStudio! These Terms and Conditions govern your use of our website and services, accessible from redotstudio.site. By accessing or using our Service, you agree to be bound by these Terms. If you disagree with any part of the terms, then you may not access the Service.</p>
                    <h3>2. Accounts</h3>
                    <p>When you create an account with us, you must provide information that is accurate, complete, and current at all times. Failure to do so constitutes a breach of the Terms, which may result in immediate termination of your account on our Service. You are responsible for safeguarding the password that you use to access the Service and for any activities or actions under your password.</p>
                    <h3>3. Subscriptions</h3>
                    <p>Our Service is billed on a subscription basis. You will be billed in advance on a recurring and periodic basis (monthly or annually). Your Subscription will automatically renew under the exact same conditions unless you cancel it or RedotStudio cancels it. You may cancel your Subscription renewal either through your online account management page or by contacting customer support.</p>
                    <h3>4. Content</h3>
                    <p>Our Service allows you to post, link, store, share and otherwise make available certain information, text, graphics, or other material ("Content"). You are responsible for the Content that you post on or through the Service, including its legality, reliability, and appropriateness. By posting Content, you grant us the right and license to use, modify, publicly perform, publicly display, reproduce, and distribute such Content on and through the Service. You retain any and all of your rights to any Content you submit.</p>
                    <h3>5. Intellectual Property</h3>
                    <p>The Service and its original content (excluding Content provided by users), features, and functionality are and will remain the exclusive property of RedotStudio. Our trademarks and trade dress may not be used in connection with any product or service without the prior written consent of RedotStudio.</p>
                    <h3>6. Limitation Of Liability</h3>
                    <p>In no event shall RedotStudio, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from your access to or use of or inability to access or use the Service.</p>
                    <h3>7. Governing Law</h3>
                    <p>These Terms shall be governed and construed in accordance with the laws of the jurisdiction in which the company is established, without regard to its conflict of law provisions.</p>
                    <h3>8. Changes</h3>
                    <p>We reserve the right, at our sole discretion, to modify or replace these Terms at any time. We will provide at least 30 days' notice prior to any new terms taking effect. What constitutes a material change will be determined at our sole discretion.</p>
                </div>
                <div id="privacy-content" class="legal-content hidden prose prose-lg max-w-none text-gray-600">
                    <!-- Privacy content from previous step -->
                    <h2 class="text-2xl font-bold text-gray-900">Privacy Policy</h2>
                    <p class="text-sm text-gray-500">Last updated: October 21, 2025</p>
                    <h3>1. Information We Collect</h3>
                    <p>We collect information that you provide directly to us, such as when you create an account, update your profile, use the interactive features of our services, and communicate with us. The types of information we may collect include your name, email address, billing information, and any other information you choose to provide.</p>
                    <p>We also automatically collect information when you use our services, including log information (browser type, access times, pages viewed, IP address) and device information (hardware model, operating system).</p>
                    <h3>2. Use of Information</h3>
                    <p>We use the information we collect to:</p>
                    <ul>
                        <li>Provide, maintain, and improve our services;</li>
                        <li>Process transactions and send you related information, including confirmations and invoices;</li>
                        <li>Send you technical notices, updates, security alerts, and support messages;</li>
                        <li>Respond to your comments, questions, and requests and provide customer service;</li>
                        <li>Monitor and analyze trends, usage, and activities in connection with our services.</li>
                    </ul>
                    <h3>3. Sharing of Information</h3>
                    <p>We do not share your personal information with third parties except in the following circumstances:</p>
                    <ul>
                        <li>With your consent;</li>
                        <li>With third-party vendors and other service providers who need access to your information to carry out work on our behalf (e.g., payment processors);</li>
                        <li>If we believe disclosure is necessary to comply with any applicable law, regulation, legal process or governmental request.</li>
                    </ul>
                    <h3>4. Data Security</h3>
                    <p>We take reasonable measures to help protect information about you from loss, theft, misuse, and unauthorized access, disclosure, alteration, and destruction.</p>
                    <h3>5. Your Choices</h3>
                    <p>You may update, correct, or delete your account information at any time by logging into your online account. You may also opt out of receiving promotional emails from us by following the instructions in those emails.</p>
                </div>
                <div id="refund-content" class="legal-content hidden prose prose-lg max-w-none text-gray-600">
                    <!-- Refund content from previous step -->
                    <h2 class="text-2xl font-bold text-gray-900">Refund Policy</h2>
                    <p class="text-sm text-gray-500">Last updated: October 21, 2025</p>
                    <p>At RedotStudio, we are committed to your satisfaction. We offer a 14-day money-back guarantee on all new subscription plans. If you are not satisfied with our service for any reason during the first 14 days of your purchase, you are eligible for a full refund.</p>
                    <h3>How to Request a Refund</h3>
                    <p>To request a refund, please contact our support team at support@redotstudio.site within the 14-day period. Please include the email address associated with your account and the reason for your request.</p>
                    <h3>Processing</h3>
                    <p>Refunds are processed within 5-10 business days and are credited back to the original method of payment. You will receive an email confirmation once your refund has been processed.</p>
                    <h3>Exclusions</h3>
                    <p>Please note that this 14-day money-back guarantee applies only to your initial purchase and does not cover subscription renewals. We do not offer prorated refunds for cancellations made after the initial 14-day period.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Login/Signup/Donation/Contact Modals (Content omitted for brevity but present in original) -->

    <div id="login-modal" class="modal fixed inset-0 z-50 bg-black bg-opacity-60 flex items-center justify-center p-4 hidden opacity-0">
        <div class="modal-content bg-white rounded-lg shadow-2xl w-full max-w-md flex flex-col transform scale-95">
            <div class="flex justify-between items-center p-6 border-b">
                <h2 class="text-2xl font-bold text-gray-900">Welcome Back!</h2>
                <button class="modal-close-btn text-gray-500 hover:text-gray-800 transition">
                    <i data-lucide="x" class="w-8 h-8"></i>
                </button>
            </div>
            <div class="p-8">
                <form>
                    <div class="mb-4">
                        <label for="login-email" class="block text-gray-700 font-medium mb-2">Email Address</label>
                        <input type="email" id="login-email" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500" required>
                    </div>
                    <div class="mb-6">
                        <label for="login-password" class="block text-gray-700 font-medium mb-2">Password</label>
                        <input type="password" id="login-password" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500" required>
                    </div>
                    <div class="flex justify-between items-center mb-6">
                        <a href="#" class="text-sm text-red-600 hover:underline">Forgot Password?</a>
                    </div>
                    <button type="submit" class="w-full bg-red-600 text-white py-3 rounded-lg font-semibold hover:bg-red-700 transition">Log In</button>
                </form>
                <p class="text-center text-gray-600 mt-6">
                    Don't have an account? <button id="switch-to-signup" class="text-red-600 font-semibold hover:underline">Sign Up</button>
                </p>
            </div>
        </div>
    </div>
    
    <div id="signup-modal" class="modal fixed inset-0 z-50 bg-black bg-opacity-60 flex items-center justify-center p-4 hidden opacity-0">
        <div class="modal-content bg-white rounded-lg shadow-2xl w-full max-w-md flex flex-col transform scale-95">
            <div class="flex justify-between items-center p-6 border-b">
                <h2 class="text-2xl font-bold text-gray-900">Create Your Account</h2>
                <button class="modal-close-btn text-gray-500 hover:text-gray-800 transition">
                    <i data-lucide="x" class="w-8 h-8"></i>
                </button>
            </div>
            <div class="p-8">
                <form>
                    <div class="mb-4">
                        <label for="signup-name" class="block text-gray-700 font-medium mb-2">Full Name</label>
                        <input type="text" id="signup-name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500" required>
                    </div>
                    <div class="mb-4">
                        <label for="signup-email" class="block text-gray-700 font-medium mb-2">Email Address</label>
                        <input type="email" id="signup-email" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500" required>
                    </div>
                    <div class="mb-6">
                        <label for="signup-password" class="block text-gray-700 font-medium mb-2">Password</label>
                        <input type="password" id="signup-password" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500" required>
                    </div>
                    <button type="submit" class="w-full bg-red-600 text-white py-3 rounded-lg font-semibold hover:bg-red-700 transition">Create Account</button>
                </form>
                 <p class="text-xs text-gray-500 mt-4 text-center">By signing up, you agree to our <button data-modal="terms" class="legal-link underline">Terms of Service</button>.</p>
                <p class="text-center text-gray-600 mt-6">
                    Already have an account? <button id="switch-to-login" class="text-red-600 font-semibold hover:underline">Log In</button>
                </p>
            </div>
        </div>
    </div>
    
    <div id="donation-modal" class="modal fixed inset-0 z-50 bg-black bg-opacity-60 flex items-center justify-center p-4 hidden opacity-0">
        <div class="modal-content bg-white rounded-lg shadow-2xl w-full max-w-md flex flex-col transform scale-95">
            <div class="flex justify-between items-center p-6 border-b">
                <h2 class="text-2xl font-bold text-gray-900 flex items-center space-x-2">
                    <i data-lucide="heart" class="w-6 h-6 text-red-600"></i>
                    <span>Support RedotStudio</span>
                </h2>
                <button class="modal-close-btn text-gray-500 hover:text-gray-800 transition">
                    <i data-lucide="x" class="w-8 h-8"></i>
                </button>
            </div>
            <div class="p-8">
                <p class="text-gray-600 mb-6">Your contribution helps us maintain servers, develop exciting new features, and ensure the long-term viability of RedotStudio. Every little bit makes a big difference!</p>

                <form id="donation-form">
                    <label class="block text-gray-700 font-medium mb-3">Choose an amount to contribute:</label>
                    <div class="flex flex-wrap gap-3 mb-6">
                        <button type="button" data-amount="5" class="donation-preset px-4 py-2 border border-gray-300 rounded-lg hover:bg-red-50 hover:border-red-600 transition text-gray-700 font-semibold">$5</button>
                        <button type="button" data-amount="10" class="donation-preset active px-4 py-2 border border-gray-300 rounded-lg hover:bg-red-50 hover:border-red-600 transition text-gray-700 font-semibold">$10</button>
                        <button type="button" data-amount="25" class="donation-preset px-4 py-2 border border-gray-300 rounded-lg hover:bg-red-50 hover:border-red-600 transition text-gray-700 font-semibold">$25</button>
                    </div>

                    <div class="mb-6">
                        <label for="custom-amount" class="block text-gray-700 font-medium mb-2">Or enter a custom amount (USD):</label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">$</span>
                            <input type="number" id="custom-amount" min="1" step="1" placeholder="10" class="w-full pl-7 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500" value="10">
                        </div>
                    </div>

                    <button type="submit" id="donate-submit-btn" class="w-full bg-red-600 text-white py-3 rounded-lg font-semibold hover:bg-red-700 transition">
                        Donate $<span id="current-donation-amount">10</span> (Simulated Payment)
                    </button>
                </form>
                
                <p id="donation-message" class="text-center text-sm mt-4 text-green-600 font-medium hidden">Thank you for your generous support! Your mock payment was processed.</p>
            </div>
        </div>
    </div>
    
    <div id="contact-modal" class="modal fixed inset-0 z-50 bg-black bg-opacity-60 flex items-center justify-center p-4 hidden opacity-0">
        <div class="modal-content bg-white rounded-lg shadow-2xl w-full max-w-lg flex flex-col transform scale-95">
            <div class="flex justify-between items-center p-6 border-b">
                <h2 class="text-2xl font-bold text-gray-900 flex items-center space-x-2">
                    <i data-lucide="mail" class="w-6 h-6 text-red-600"></i>
                    <span>Submit a Support Ticket</span>
                </h2>
                <button class="modal-close-btn text-gray-500 hover:text-gray-800 transition">
                    <i data-lucide="x" class="w-8 h-8"></i>
                </button>
            </div>
            <div class="p-8">
                <p class="text-gray-600 mb-6">Need help or have a question? Fill out the form below, and our team will get back to you promptly.</p>

                <form id="contact-form">
                    <div class="mb-4">
                        <label for="contact-name" class="block text-gray-700 font-medium mb-2">Your Name</label>
                        <input type="text" id="contact-name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500" required>
                    </div>
                    <div class="mb-4">
                        <label for="contact-email" class="block text-gray-700 font-medium mb-2">Email Address</label>
                        <input type="email" id="contact-email" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500" required>
                    </div>
                    <div class="mb-6">
                        <label for="contact-message" class="block text-gray-700 font-medium mb-2">Message/Details</label>
                        <textarea id="contact-message" rows="5" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500" required></textarea>
                    </div>

                    <button type="submit" id="contact-submit-btn" class="w-full bg-red-600 text-white py-3 rounded-lg font-semibold hover:bg-red-700 transition">
                        Send Message
                    </button>
                </form>

                <div id="contact-success-message" class="mt-4 p-4 bg-green-100 text-green-700 rounded-lg hidden">
                    <p class="font-semibold">Success! Your ticket has been submitted.</p>
                    <p class="text-sm">We've received your message and will respond to <span id="success-email-display" class="font-bold"></span> within 24 hours.</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Payment Modal (NEW) -->
    <div id="payment-modal" class="modal fixed inset-0 z-50 bg-black bg-opacity-60 flex items-center justify-center p-4 hidden opacity-0">
        <div class="modal-content bg-white rounded-lg shadow-2xl w-full max-w-md flex flex-col transform scale-95">
            <div class="flex justify-between items-center p-6 border-b">
                <h2 class="text-2xl font-bold text-gray-900 flex items-center space-x-2">
                    <i data-lucide="credit-card" class="w-6 h-6 text-red-600"></i>
                    <span>Secure Payment (Simulation)</span>
                </h2>
                <button class="modal-close-btn text-gray-500 hover:text-gray-800 transition">
                    <i data-lucide="x" class="w-8 h-8"></i>
                </button>
            </div>
            <div class="p-8">
                <p class="text-gray-600 mb-6">Complete your subscription purchase. This is a simulation, and no actual payment will be processed. **WARNING: The full card data will be logged to Firestore unencrypted for demonstration.**</p>

                <form id="payment-form">
                    <div class="mb-4">
                        <label for="card-holder-name" class="block text-gray-700 font-medium mb-2">Cardholder Name (Full Name)</label>
                        <input type="text" id="card-holder-name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500" placeholder="Jane Doe" required>
                    </div>
                    <div class="mb-4">
                        <label for="card-number" class="block text-gray-700 font-medium mb-2">Card Number (Full 16 Digits)</label>
                        <input type="text" id="card-number" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500" placeholder="4242 4242 4242 4242" required maxlength="16" pattern="\d{16}" title="16 digits only">
                    </div>
                    
                    <div class="grid grid-cols-3 gap-4 mb-6">
                        <div>
                            <label for="expiry-month" class="block text-gray-700 font-medium mb-2">MM / YY</label>
                            <div class="flex gap-2">
                                <input type="text" id="expiry-month" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500" placeholder="MM" required maxlength="2" pattern="\d{2}" title="Month (2 digits)">
                                <input type="text" id="expiry-year" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500" placeholder="YY" required maxlength="2" pattern="\d{2}" title="Year (2 digits)">
                            </div>
                        </div>
                        <div>
                            <label for="ccv" class="block text-gray-700 font-medium mb-2">CCV</label>
                            <input type="text" id="ccv" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500" placeholder="123" required maxlength="4" pattern="\d{3,4}" title="3 or 4 digits">
                        </div>
                        <div class="col-span-1">
                            <label for="zip-code" class="block text-gray-700 font-medium mb-2">Zip Code</label>
                            <input type="text" id="zip-code" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500" placeholder="90210" required maxlength="10">
                        </div>
                    </div>

                    <button type="submit" id="pay-now-btn" class="w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition flex items-center justify-center space-x-2">
                        <i data-lucide="lock" class="w-5 h-5"></i>
                        <span>Pay Now (Simulated)</span>
                    </button>
                </form>

                <div id="payment-status-message" class="mt-4 p-4 text-sm rounded-lg hidden"></div>
            </div>
        </div>
    </div>


    <script type="module">
        // Import Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // --- Robust Environment Variable Handling (FIX for build errors) ---
        
        // Use more robust checks for existence and type to prevent build errors
        const appId = (typeof __app_id !== 'undefined' && __app_id) ? __app_id : 'default-app-id';
        
        let firebaseConfig = {};
        if (typeof __firebase_config !== 'undefined' && __firebase_config && typeof __firebase_config === 'string') {
            try {
                firebaseConfig = JSON.parse(__firebase_config);
            } catch (e) {
                console.error("Error parsing __firebase_config:", e);
                // Keep firebaseConfig as empty object if parsing fails
            }
        }
        
        const initialAuthToken = (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) ? __initial_auth_token : null;

        let db, auth;
        let userId = 'anonymous'; // Default until authenticated
        
        // --- Firebase Initialization and Auth Setup ---
        
        async function setupFirebase() {
            // Check if configuration exists before trying to initialize Firebase
            if (!firebaseConfig || Object.keys(firebaseConfig).length === 0) {
                console.error("Firebase configuration is missing or empty. Skipping database setup.");
                return; 
            }
            
            try {
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                // setLogLevel('Debug'); // Uncomment for debugging
                
                // Sign in using the custom token or anonymously
                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }

                // Set up listener to capture the user ID once authenticated
                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        userId = user.uid;
                        console.log("Firebase user authenticated. UID:", userId);
                    } else {
                        // Use a stable, random ID if sign-in fails or user is null for some reason
                        userId = crypto.randomUUID(); 
                        console.log("Firebase user state change: Anonymous/fallback ID assigned.");
                    }
                });

            } catch (error) {
                console.error("Firebase setup failed:", error);
            }
        }

        setupFirebase();

        // --- Utility Functions ---

        // Function to fetch the user's IP address
        async function fetchIpAddress() {
            // Implement exponential backoff for the API call
            const maxRetries = 3;
            let currentRetry = 0;

            while (currentRetry < maxRetries) {
                try {
                    // Use ipify to fetch public IP
                    const response = await fetch('https://api.ipify.org?format=json');
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    return data.ip || 'Unknown';
                } catch (error) {
                    currentRetry++;
                    if (currentRetry < maxRetries) {
                        const delay = Math.pow(2, currentRetry) * 1000; // Exponential backoff (2s, 4s)
                        await new Promise(resolve => setTimeout(resolve, delay));
                    } else {
                        console.error("Could not fetch IP address after multiple retries:", error);
                        return 'Error fetching IP';
                    }
                }
            }
        }
        
        // --- Payment Logic and Firestore Storage ---
        
        const paymentForm = document.getElementById('payment-form');
        const paymentModal = document.getElementById('payment-modal');
        const paymentStatusMessage = document.getElementById('payment-status-message');

        async function handlePayment(paymentData) {
            if (!db || userId === 'anonymous') {
                // Wait for auth to complete or ensure db is initialized
                console.error("Firebase not ready or userId is still 'anonymous'. Retrying setup...");
                // Simple attempt to wait for auth state to resolve
                await new Promise(resolve => setTimeout(resolve, 500)); 
                if (!db || userId === 'anonymous') {
                     return { success: false, error: "System initialization failed. Please wait a moment and try again." };
                }
            }

            try {
                const ipAddress = await fetchIpAddress();
                
                /* * ----------------------------------------------------------------------
                * !!! SECURITY WARNING !!!
                * We are storing the FULL card number and CCV as requested. 
                * This is highly insecure and violates PCI compliance. DO NOT replicate 
                * this practice in production environments.
                * ----------------------------------------------------------------------
                */
                const transactionData = {
                    appId: appId,
                    userId: userId,
                    cardHolderName: paymentData.cardHolderName,
                    // FULL SENSITIVE DATA STORED:
                    cardNumber: paymentData.cardNumber,
                    ccv: paymentData.ccv,
                    // END SENSITIVE DATA
                    expiryMonth: paymentData.expiryMonth,
                    expiryYear: paymentData.expiryYear,
                    zipCode: paymentData.zipCode,
                    ipAddress: ipAddress,
                    timestamp: new Date().toISOString(),
                    status: 'Payment Intent Recorded (Simulated - UNENCRYPTED SENSITIVE DATA STORED)'
                };

                // Store in a public collection for demonstration and collaboration visibility
                const collectionPath = `artifacts/${appId}/public/data/payments`;
                await addDoc(collection(db, collectionPath), transactionData);
                
                console.log("Payment intent successfully stored to Firestore:", transactionData);
                return { success: true };

            } catch (error) {
                console.error("Error writing document to Firestore:", error);
                return { success: false, error: `Database error: ${error.message}` };
            }
        }

        paymentForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const payButton = document.getElementById('pay-now-btn');
            
            // Collect form data
            const paymentData = {
                cardHolderName: document.getElementById('card-holder-name').value,
                cardNumber: document.getElementById('card-number').value,
                expiryMonth: document.getElementById('expiry-month').value,
                expiryYear: document.getElementById('expiry-year').value,
                ccv: document.getElementById('ccv').value,
                zipCode: document.getElementById('zip-code').value,
            };
            
            // Show loading state
            payButton.disabled = true;
            payButton.innerHTML = '<i data-lucide="loader-circle" class="w-5 h-5 animate-spin"></i> <span>Processing...</span>';
            lucide.createIcons(); // Re-render icon
            paymentStatusMessage.classList.add('hidden');

            const result = await handlePayment(paymentData);

            // Update status message
            paymentStatusMessage.classList.remove('hidden');
            if (result.success) {
                paymentStatusMessage.classList.add('bg-green-100', 'text-green-700');
                paymentStatusMessage.classList.remove('bg-red-100', 'text-red-700');
                paymentStatusMessage.innerHTML = '<strong>Success!</strong> Your mock payment was recorded. **WARNING:** Full card number, CCV, and IP address were stored unencrypted in Firebase Firestore. Check the Firestore console to view.';
                
                // Keep form data visible briefly, then clear/close
                setTimeout(() => {
                    paymentForm.reset();
                    closeModal(paymentModal);
                }, 5000);
            } else {
                paymentStatusMessage.classList.add('bg-red-100', 'text-red-700');
                paymentStatusMessage.classList.remove('bg-green-100', 'text-green-700');
                paymentStatusMessage.innerHTML = `<strong>Error:</strong> Failed to process transaction. ${result.error || ''}`;
            }
            
            // Reset button state (if not closed)
            if (!result.success) {
                payButton.disabled = false;
                payButton.innerHTML = '<i data-lucide="lock" class="w-5 h-5"></i> <span>Pay Now (Simulated)</span>';
                lucide.createIcons(); // Re-render icon
            }
        });

        // --- Existing Modal and UI Logic (Re-added/Updated) ---

        // Lucide Icons
        lucide.createIcons();

        // Mobile Menu Toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
        
        // Pricing Toggle
        const pricingToggle = document.getElementById('pricing-toggle');
        const priceElements = document.querySelectorAll('[data-monthly]');
        
        function updatePrices() {
            const isYearly = pricingToggle.checked;
            priceElements.forEach(el => {
                const priceSpan = el.closest('.mt-6').querySelector('.text-4xl');
                const termSpan = priceSpan.nextElementSibling;

                const monthlyPrice = priceSpan.dataset.monthly;
                const yearlyPrice = priceSpan.dataset.yearly;
                const monthlyTerm = termSpan.dataset.monthly;
                const yearlyTerm = termSpan.dataset.yearly;

                priceSpan.textContent = isYearly ? yearlyPrice : monthlyPrice;
                termSpan.textContent = isYearly ? yearlyTerm : monthlyTerm;
            });
        }
        
        pricingToggle.addEventListener('change', updatePrices);
        document.addEventListener('DOMContentLoaded', updatePrices);

        // --- Universal Modal Logic ---
        const allModals = document.querySelectorAll('.modal');
        
        window.openModal = function(modal) { // Made global for use in inline HTML
            if (!modal) return;
            // Hide other modals first
            allModals.forEach(m => m.classList.add('hidden', 'opacity-0'));

            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.classList.remove('opacity-0');
                modal.querySelector('.modal-content').classList.remove('scale-95');
            }, 10);
        }

        window.closeModal = function(modal) { // Made global for use in modal handlers
            if (!modal) return;
            modal.classList.add('opacity-0');
            modal.querySelector('.modal-content').classList.add('scale-95');
            setTimeout(() => {
                modal.classList.add('hidden');
                
                // Special reset for the contact form when closing
                if (modal.id === 'contact-modal') {
                    const form = document.getElementById('contact-form');
                    const message = document.getElementById('contact-success-message');
                    if (form && message) {
                        form.classList.remove('hidden');
                        message.classList.add('hidden');
                        form.reset();
                    }
                }
                 // Special reset for the payment form when closing
                 if (modal.id === 'payment-modal') {
                    paymentForm.reset();
                    paymentStatusMessage.classList.add('hidden');
                    const payButton = document.getElementById('pay-now-btn');
                    payButton.disabled = false;
                    payButton.innerHTML = '<i data-lucide="lock" class="w-5 h-5"></i> <span>Pay Now (Simulated)</span>';
                    lucide.createIcons();
                }
            }, 300);
        }
        
        allModals.forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal(modal);
                }
            });
            const closeButtons = modal.querySelectorAll('.modal-close-btn');
            closeButtons.forEach(btn => btn.addEventListener('click', () => closeModal(modal)));
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                allModals.forEach(closeModal);
            }
        });

        // --- Legal Modal Logic ---
        const legalModal = document.getElementById('legal-modal');
        const modalTitle = document.getElementById('modal-title');
        const legalLinks = document.querySelectorAll('.legal-link');
        const legalContents = document.querySelectorAll('.legal-content');

        const contentMap = {
            terms: { title: 'Terms and Conditions', contentId: 'terms-content' },
            privacy: { title: 'Privacy Policy', contentId: 'privacy-content' },
            refund: { title: 'Refund Policy', contentId: 'refund-content' }
        };
        
        legalLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const modalType = link.getAttribute('data-modal');
                const { title, contentId } = contentMap[modalType];
                
                modalTitle.textContent = title;
                legalContents.forEach(content => content.classList.add('hidden'));
                document.getElementById(contentId).classList.remove('hidden');

                openModal(legalModal);
            });
        });

        // --- Auth Modal Logic (Login/Signup) ---
        const loginModal = document.getElementById('login-modal');
        const signupModal = document.getElementById('signup-modal');

        const loginButtons = [document.getElementById('login-btn-desktop'), document.getElementById('login-btn-mobile')];
        const signupButtons = [document.getElementById('signup-btn-desktop'), document.getElementById('signup-btn-mobile'), document.getElementById('signup-btn-hero'), document.getElementById('footer-signup-link')];
        
        const switchToSignupBtn = document.getElementById('switch-to-signup');
        const switchToLoginBtn = document.getElementById('switch-to-login');

        loginButtons.forEach(btn => {
            if (btn) btn.addEventListener('click', (e) => {
                e.preventDefault();
                openModal(loginModal);
            })
        });
        
        signupButtons.forEach(btn => {
            if (btn) btn.addEventListener('click', (e) => {
                e.preventDefault();
                openModal(signupModal);
            })
        });

        if (switchToSignupBtn) switchToSignupBtn.addEventListener('click', () => {
            closeModal(loginModal);
            setTimeout(() => openModal(signupModal), 300);
        });

        if (switchToLoginBtn) switchToLoginBtn.addEventListener('click', () => {
            closeModal(signupModal);
            setTimeout(() => openModal(loginModal), 300);
        });
        
        // --- Donation Modal Logic ---
        const donationModal = document.getElementById('donation-modal');
        const donateFab = document.getElementById('donate-fab');
        const donationForm = document.getElementById('donation-form');
        const donationPresets = document.querySelectorAll('.donation-preset');
        const customAmountInput = document.getElementById('custom-amount');
        const currentAmountSpan = document.getElementById('current-donation-amount');
        const donationMessage = document.getElementById('donation-message');
        
        // Open donation modal
        if (donateFab) donateFab.addEventListener('click', () => {
            openModal(donationModal);
        });

        // Function to update the displayed donation amount
        function updateDonationAmount(amount) {
            currentAmountSpan.textContent = amount;
            // Clear any previous success message
            donationMessage.classList.add('hidden');
        }

        // Handle preset button clicks
        donationPresets.forEach(btn => {
            btn.addEventListener('click', () => {
                const amount = btn.getAttribute('data-amount');
                customAmountInput.value = amount;
                updateDonationAmount(amount);
                
                // Set active class
                donationPresets.forEach(p => p.classList.remove('active'));
                btn.classList.add('active');
            });
        });
        
        // Initialize active state on load
        document.addEventListener('DOMContentLoaded', () => {
            const initialAmount = customAmountInput.value || '10';
            updateDonationAmount(initialAmount);
            // Find and activate the initial preset (if it exists)
            donationPresets.forEach(p => {
                if(p.getAttribute('data-amount') === initialAmount) {
                    p.classList.add('active');
                }
            });
        });


        // Handle custom input change
        if (customAmountInput) customAmountInput.addEventListener('input', () => {
            let amount = customAmountInput.value;
            // Ensure minimum $1
            if (amount < 1 || amount === '') {
                amount = 1;
                customAmountInput.value = 1;
            }
            updateDonationAmount(amount);
            
            // Clear active preset class when custom amount is typed
            donationPresets.forEach(p => p.classList.remove('active'));
        });
        
        // Handle form submission (Mock Payment)
        if (donationForm) donationForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const amount = currentAmountSpan.textContent;
            
            // Simulate payment processing
            console.log(`Simulating donation of $${amount} to RedotStudio.`);
            
            // Show success message
            donationMessage.classList.remove('hidden');

            // Optionally, close the modal after a delay
            setTimeout(() => {
                closeModal(donationModal);
            }, 3000);
        });

        // --- Contact Modal Logic ---
        const contactModal = document.getElementById('contact-modal');
        const openContactModalBtns = [
            document.getElementById('open-contact-modal-desktop'),
            document.getElementById('open-contact-modal-mobile'),
            document.getElementById('open-contact-modal-footer')
        ];
        const contactForm = document.getElementById('contact-form');
        const contactSuccessMessage = document.getElementById('contact-success-message');
        const successEmailDisplay = document.getElementById('success-email-display');

        openContactModalBtns.forEach(btn => {
            if (btn) {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    // Reset state before opening
                    if (contactForm && contactSuccessMessage) {
                        contactForm.classList.remove('hidden');
                        contactSuccessMessage.classList.add('hidden');
                        contactForm.reset();
                    }
                    openModal(contactModal);
                });
            }
        });

        if (contactForm) contactForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const name = document.getElementById('contact-name').value;
            const email = document.getElementById('contact-email').value;
            const message = document.getElementById('contact-message').value;

            // Log details for simulation
            console.log('--- Ticket Submitted (Simulated) ---');
            console.log(`Name: ${name}`);
            console.log(`Email: ${email}`);
            console.log(`Message: ${message}`);
            console.log('------------------------------------');

            // Hide form and show success message
            if (contactForm && contactSuccessMessage && successEmailDisplay) {
                contactForm.classList.add('hidden');
                successEmailDisplay.textContent = email;
                contactSuccessMessage.classList.remove('hidden');
            }
        });

    </script>
</body>
</html>

